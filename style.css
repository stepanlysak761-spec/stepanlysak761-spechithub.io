document.addEventListener('DOMContentLoaded', () => {
    // 1. Ефект друкарської машинки
    const textStr = "Ferrari 499P — це не просто гоночний автомобіль, а символ історичного реваншу. 120-градусний V6 Biturbo інтегрований у структуру шасі, а гібридна система 900V активується на швидкостях понад 190 км/год.";
    const typewriter = document.getElementById('typewriter');
    let charIndex = 0;

    function type() {
        if (charIndex < textStr.length) {
            typewriter.innerHTML += textStr.charAt(charIndex);
            charIndex++;
            setTimeout(type, 25);
        }
    }

    // 2. Анімація появи при скролі
    const revealElements = document.querySelectorAll('.reveal');
    const revealOnScroll = () => {
        revealElements.forEach(el => {
            const windowHeight = window.innerHeight;
            const elementTop = el.getBoundingClientRect().top;
            if (elementTop < windowHeight - 100) {
                el.classList.add('active');
            }
        });
    };

    // 3. Зміна колірних режимів
    const themeBtn = document.getElementById('theme-btn');
    const root = document.documentElement;
    const mainTitle = document.getElementById('main-title');
    const status = document.getElementById('sys-status');
    let currentMode = 0; // 0: Red, 1: Yellow, 2: Cyber Blue

    themeBtn.addEventListener('click', () => {
        currentMode = (currentMode + 1) % 3;
        
        if (currentMode === 0) {
            root.style.setProperty('--accent', '#ff0000');
            mainTitle.innerText = "499P";
            status.innerText = "SYS_STATUS: NOMINAL";
        } else if (currentMode === 1) {
            root.style.setProperty('--accent', '#ffd700');
            mainTitle.innerText = "312 PB";
            status.innerText = "SYS_STATUS: CLASSIC_MODE";
        } else {
            root.style.setProperty('--accent', '#00f2ff');
            mainTitle.innerText = "HYBRID";
            status.innerText = "SYS_STATUS: OVERDRIVE";
        }
    });

    // Ініціалізація
    window.addEventListener('scroll', revealOnScroll);
    setTimeout(type, 1000);
    revealOnScroll();
});
